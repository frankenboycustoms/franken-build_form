<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Franken-Boy Build Request</title>
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0;
  padding:0;
  width:100%;
  background:black;
  color:#9bbc0f;
  font-family:'Press Start 2P', cursive;
  text-transform: uppercase;
  -webkit-overflow-scrolling: touch;
}
.pixel-grid {
  position:absolute;
  top:0; left:0; width:100%; height:100%;
  background-image:
    linear-gradient(to right, rgba(155,188,15,0.07) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(155,188,15,0.07) 1px, transparent 1px);
  background-size:4px 4px;
  pointer-events:none;
  z-index:0;
}
.arcade-btn {
  background:#9bbc0f;
  color:black;
  padding:12px 20px;
  border:2px solid #445c0a;
  border-radius:6px;
  cursor:pointer;
  font-family:'Press Start 2P', cursive;
  font-size:12px;
  line-height:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 0 3px #9bbc0f, inset 0 0 2px #445c0a;
  transition:all 0.2s ease;
  text-transform:uppercase;
  position:relative;
  user-select:none;
}
.arcade-btn:hover { background:black; color:#9bbc0f; box-shadow:0 0 6px #9bbc0f; }
.arcade-btn .arrow { display:inline-block; transform:translateY(-1px); margin-right:4px; }
.arcade-btn .text { display:inline-block; transform:translateY(1px); }
input, textarea, select {
  font-family:'Press Start 2P', cursive;
  caret-color:#9bbc0f;
  background:black;
  color:#9bbc0f;
  border:1px solid #9bbc0f;
  border-radius:4px;
  font-size:10px;
  padding:8px;
  text-transform:uppercase;
  position:relative;
  z-index:1;
}
.form-container {
  max-width:700px;
  margin:20px auto;
  padding:15px;
  background:black;
  border:2px solid #9bbc0f;
  border-radius:8px;
  position:relative;
  z-index:1;
}
.form-container h2 { font-size:12px; text-align:center; margin-bottom:12px; color:#9bbc0f; }
.form-container label { font-size:10px; margin-top:8px; display:block; color:#9bbc0f; }
#form-status { text-align:center; margin-top:10px; font-weight:bold; color:#9bbc0f; }
#estimated_total_display { text-align:right; font-size:16px; font-weight:bold; color:#f9f9f9; margin-top:8px; }
/* Thank-you overlay */
#thank-you-overlay {
  position:fixed; top:0; left:0; right:0; bottom:0;
  display:flex; justify-content:center; align-items:flex-start; padding-top:100px;
  background:rgba(0,0,0,0.95);
  z-index:9999;
  opacity:0; visibility:hidden; pointer-events:none;
  transition: opacity 0.35s ease, visibility 0.35s ease;
}
#thank-you-overlay.show { opacity:1; visibility:visible; pointer-events:auto; }
#thank-you-overlay .popup {
  background:black;
  border:2px solid #9bbc0f;
  border-radius:8px;
  text-align:center;
  padding:15px 20px;
  max-width:400px;
  color:#9bbc0f;
  transform:scale(0.86);
  transition:transform 0.35s ease;
}
#thank-you-overlay.show .popup { transform:scale(1); }
#thank-you-overlay p { font-size:10px; margin-top:5px; }
</style>
</head>
<body>

<div class="form-container">
  <div class="pixel-grid"></div>
  <h2>FRANKEN-BOY BUILD REQUEST</h2>

  <form id="franken-form" style="display:flex; flex-direction:column; gap:10px;">
    <label>Name</label>
    <input type="text" name="name" placeholder="YOUR NAME" required>
    <label>Email</label>
    <input type="email" name="email" placeholder="YOUR EMAIL" required>
    <label>Console Theme</label>
    <select name="console_theme" id="theme" required>
      <option value="">Choose theme or custom</option>
      <option value="green dragon" data-price="350">Green Dragon $350</option>
      <option value="bone head" data-price="350">Bone Head $350</option>
      <option value="90s alarm clock" data-price="350">90's Alarm Clock $350</option>
      <option value="plumber bros" data-price="350">Plumber Bros $350</option>
      <option value="time travel" data-price="350">Time Travel $350</option>
      <option value="pirates" data-price="350">Pirates $350</option>
      <option value="fire dragon" data-price="350">Fire Dragon $350</option>
      <option value="ghost" data-price="350">Ghost $350</option>
      <option value="grass toad" data-price="350">Grass Toad $350</option>
      <option value="water turtle" data-price="350">Water Turtle $350</option>
      <option value="custom" data-price="390">Custom $390+</option>
    </select>

    <div id="custom-fields" style="display:none; flex-direction: column; gap:6px;">
      <label>Shell Color</label><input type="text" name="shell_color">
      <label>Screen Glass Color (if applicable)</label><input type="text" name="screen_color">
      <label>L & R Button Color</label><input type="text" name="l_r_color">
      <label>Brightness Button Color</label><input type="text" name="brightness_button_color">
      <label>D-Pad Color</label><input type="text" name="dpad_color">
      <label>A & B Button Color</label><input type="text" name="a_b_color">
      <label>Start & Select Button Color</label><input type="text" name="start_select_color">
      <label>Power Switch Color</label><input type="text" name="power_color">
      <label>Speaker Color (if applicable)</label><input type="text" name="speaker_color">
    </div>

    <label>USB-C Upgrade + Custom Cable</label>
    <select name="usb_c" id="usb" required>
      <option value="" data-price="0">Select an option</option>
      <option value="yes" data-price="40">Yes (+$40)</option>
      <option value="no" data-price="0">No</option>
    </select>

    <label>Tell us about your build</label>
    <textarea name="idea" rows="6" placeholder="Your build..." required></textarea>

    <div id="estimated_total_display">Estimated Total: $0</div>
    <input type="hidden" name="estimated_total" id="estimated_total">

    <button type="submit" class="arcade-btn">
      <span class="arrow"></span><span class="text">SUBMIT</span>
    </button>
  </form>

  <div id="form-status"></div>

  <div id="thank-you-overlay">
    <div class="popup">
      <h2 style="font-size:14px; margin-bottom:5px;">
        <span id="popup-message" class="popup-text"></span>
      </h2>
      <p>Your submission has been received!</p>
      <p id="thank-you-total"></p>
      <button id="close-thank-you" class="arcade-btn" style="margin-top:8px;">
        <span class="arrow"></span><span class="text">CONTINUE</span>
      </button>
    </div>
  </div>
</div>

<script>
const themeSelect = document.getElementById('theme');
const usbSelect = document.getElementById('usb');
const customFields = document.getElementById('custom-fields');
const estimatedDisplay = document.getElementById('estimated_total_display');
const hiddenTotal = document.getElementById('estimated_total');

function updateTotal() {
  let total = 0;
  const themeOption = themeSelect.selectedOptions[0];
  const usbOption = usbSelect.selectedOptions[0];
  if(themeOption && themeOption.dataset.price) total += parseInt(themeOption.dataset.price);
  if(usbOption && usbOption.dataset.price) total += parseInt(usbOption.dataset.price);
  let displayTotal = total;
  if(themeSelect.value==='custom') displayTotal+='+';
  estimatedDisplay.innerText = `Estimated Total: $${displayTotal}`;
  hiddenTotal.value = total;
}

themeSelect.addEventListener('change', ()=> {
  customFields.style.display = themeSelect.value==='custom'?'flex':'none';
  updateTotal();
});
usbSelect.addEventListener('change', updateTotal);

window.onload = function() {
  const form = document.getElementById('franken-form');
  const status = document.getElementById('form-status');
  const overlay = document.getElementById('thank-you-overlay');
  const popupMessage = document.getElementById('popup-message');
  const thankTotal = document.getElementById('thank-you-total');
  const closeBtn = document.getElementById('close-thank-you');

  function typeText(el,text,delay=50){
    el.innerHTML="";
    let i=0;
    function nextChar(){ if(i<text.length){ el.innerHTML+=text[i]; i++; setTimeout(nextChar,delay); } }
    nextChar();
  }

  form.addEventListener('submit', function(e){
    e.preventDefault();
    if(!form.checkValidity()){ status.style.color='red'; status.innerText='Please fill out all required fields!'; return; }
    status.innerText="TRANSMITTING..."; status.style.color="#9bbc0f";

    fetch("https://script.google.com/macros/s/AKfycbxXwUN_FUDNSIVPCwvf52Q7hEhAuzIiOjdb3xUQbRconiyzCioTOf5d9LFVJlh7co71/exec", {
      method:"POST", body:new URLSearchParams(new FormData(form))
    })
    .then(resp=>resp.json())
    .then(data=>{
      if(data.status==="success"){
        form.style.display="none"; status.style.display="none";
        overlay.classList.add("show");
        thankTotal.innerText=`Estimated Total: $${hiddenTotal.value}${themeSelect.value==='custom'?'+':''}`;
        setTimeout(()=>{ typeText(popupMessage,"SUBMISSION SENT!",60); },10);
      } else { status.style.color="red"; status.innerText="TRANSMISSION FAILED"; }
    })
    .catch(err=>{ status.style.color="red"; status.innerText="TRANSMISSION FAILED"; });
  });

  closeBtn.addEventListener('click', ()=>{
    overlay.classList.remove("show"); form.style.display="flex";
    form.reset(); customFields.style.display='none';
    updateTotal(); status.style.display="block"; status.innerText="";
  });

  updateTotal();
};
</script>

</body>
</html>
